:root{
  --card-w: clamp(34px, 7.2vw, 58px);
  --card-h: calc(var(--card-w) * 1.48);
  --gap: 8px; --radius: 10px;
  --bg:#f3f4f7; --ink:#111; --muted:#666; --line:#e5e7eb; --panel:#fff;
}
*{box-sizing:border-box}
html,body{height:100%}
body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:var(--bg);color:var(--ink)}
.safe{padding:env(safe-area-inset-top) 12px calc(12px + env(safe-area-inset-bottom)) 12px;max-width:980px;margin:0 auto}

.hdr{display:grid;grid-template-columns:1fr auto auto;gap:10px;align-items:end;margin:10px 0 6px}
.ttl{font-weight:700;font-size:18px}
.unit{display:flex;flex-direction:column;gap:4px}
.unit input{width:90px;padding:8px;border:1px solid #ccc;border-radius:8px}
.actions{display:flex;gap:6px;justify-self:end}

.btn,.btn2,.iconbtn{border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer}
.btn{background:#111;color:#fff;border:1px solid #111}
.btn2{background:#fff;color:#111;border:1px solid #999}
.iconbtn{background:#fff;color:#111;border:1px solid #ddd;line-height:1}

.player-section{border:1px solid var(--line);border-radius:12px;background:var(--panel);padding:10px;margin:8px 0}
.player-head{display:flex;justify-content:space-between;align-items:center}
.player-name{margin:2px 0 8px;font-size:15px}
.player-name.you{color:#0b7}
.score{font-weight:800;color:#444}
.score.you{color:#0a7f33}

.rows{display:grid;grid-template-columns:1fr;gap:6px}
.row-line{display:flex;justify-content:space-between;align-items:center}
.row-name{font-weight:700;font-size:13px;color:#333;margin-top:4px}
.row-score{font-weight:700;color:#555}
.slots{display:grid;grid-template-columns:repeat(5,var(--card-w));gap:var(--gap)}
.slot{width:var(--card-w);height:var(--card-h);border:1px dashed #bbb;border-radius:var(--radius);background:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;color:#333;user-select:none;cursor:pointer}

.center-zone{display:flex;justify-content:center;margin:10px 0}
.deal-wrap{border:1px solid var(--line);border-radius:12px;background:var(--panel);padding:10px;display:grid;gap:8px;justify-items:center;max-width:640px;width:100%}
.deal-title{font-weight:700}
.deal-info{display:flex;gap:12px;align-items:center}
.deal-pool{display:flex;gap:6px;flex-wrap:wrap;min-height:calc(var(--card-h) + 4px)}
.pool-card{width:var(--card-w);height:var(--card-h);border:1px solid #aaa;border-radius:var(--radius);display:flex;align-items:center;justify-content:center;font-weight:800;background:#fff;position:relative}
.pool-card .rm{position:absolute;top:2px;right:4px;font-size:12px;color:#999}

.deal-ctrls{display:flex;gap:8px}

.card{border:1px solid var(--line);border-radius:12px;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.04);padding:12px;margin-top:10px}
.muted{color:var(--muted);font-size:13px}
.result{border-collapse:collapse;width:100%}
.result th,.result td{border-bottom:1px solid var(--line);padding:8px;text-align:left}

/* карточки */
.cb{width:var(--card-w);height:var(--card-h);border:1px solid #aaa;border-radius:var(--radius);background:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;position:relative;cursor:pointer}
.cb.disabled{opacity:.28;pointer-events:none}
.cb .suit{position:absolute;bottom:4px;right:6px;font-size:12px}
.red{color:#c62828}.black{color:#111}
.deck{display:grid;grid-template-columns:repeat(13,var(--card-w));gap:var(--gap)}

/* MODAL (слои) */
.modal{position:fixed;inset:0;display:none}
.modal.show{display:block}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35);z-index:1}
.modal-dialog{position:relative;margin:8vh auto 0 auto;max-width:min(980px,96vw);background:#fff;border-radius:12px;padding:12px;border:1px solid var(--line);z-index:2}
.modal-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.mh-title{font-weight:700}

@media (max-width:420px){
  .hdr{grid-template-columns:1fr 100px auto}
  .ttl{font-size:16px}
}
